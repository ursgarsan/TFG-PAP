extends ../layout

block content
  h1= title

  form(id="grupoForm", action="/grupos/create", method="POST")
    label(for="tipo") Tipo:
    input(type="text", id="tipo", name="tipo", required)
    br

    label(for="grupo") Grupo:
    input(type="text", id="grupo", name="grupo", required)
    br

    label(for="cuatrimestre") Cuatrimestre:
    input(type="text", id="cuatrimestre", name="cuatrimestre", required)
    br

    label(for="acreditacion") Acreditación:
    input(type="text", id="acreditacion", name="acreditacion", required)
    br

    label(for="curso") Curso:
    input(type="text", id="curso", name="curso", required)
    br

    label(for="asignatura_id") Asignatura:
    select(id="asignatura_id", name="asignatura_id", required)
      each asignatura in asignaturas
        option(value=asignatura._id)= asignatura.nombre
    br

    #horarioContainer
      .horarioEntry
        each day in ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes']
          input(type="checkbox", id=`horario_${day.toLowerCase()}`, name=`horario[0][dias]`, value=day)
          label(for=`horario_${day.toLowerCase()}`)= day
          br
        label(for="hora_inicio") Hora de inicio:
        input(type="text", id="hora_inicio", name="horario[0][hora_inicio]", required)
        br
        label(for="hora_fin") Hora de fin:
        input(type="text", id="hora_fin", name="horario[0][hora_fin]", required)
        br

    button(type="button", id="agregarHorario") Agregar Horario

    button(type="submit") Crear Grupo

  script.
    document.getElementById('agregarHorario').addEventListener('click', function() {
      var horarioContainer = document.getElementById('horarioContainer');
      var numHorarios = document.querySelectorAll('.horarioEntry').length;

      var newHorarioEntry = document.createElement('div');
      newHorarioEntry.classList.add('horarioEntry');

      ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes'].forEach(function(day) {
        var checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.id = 'horario_' + day.toLowerCase();
        checkbox.name = `horario[${numHorarios}][dias]`;
        checkbox.value = day;

        var label = document.createElement('label');
        label.htmlFor = 'horario_' + day.toLowerCase();
        label.textContent = day;

        newHorarioEntry.appendChild(checkbox);
        newHorarioEntry.appendChild(label);
        newHorarioEntry.appendChild(document.createElement('br'));
      });

      var horaInicioLabel = document.createElement('label');
      horaInicioLabel.htmlFor = 'hora_inicio';
      horaInicioLabel.textContent = 'Hora de inicio:';
      newHorarioEntry.appendChild(horaInicioLabel);

      var horaInicioInput = document.createElement('input');
      horaInicioInput.type = 'text';
      horaInicioInput.id = 'hora_inicio';
      horaInicioInput.name = `horario[${numHorarios}][hora_inicio]`;
      horaInicioInput.required = true;
      newHorarioEntry.appendChild(horaInicioInput);
      newHorarioEntry.appendChild(document.createElement('br'));

      var horaFinLabel = document.createElement('label');
      horaFinLabel.htmlFor = 'hora_fin';
      horaFinLabel.textContent = 'Hora de fin:';
      newHorarioEntry.appendChild(horaFinLabel);

      var horaFinInput = document.createElement('input');
      horaFinInput.type = 'text';
      horaFinInput.id = 'hora_fin';
      horaFinInput.name = `horario[${numHorarios}][hora_fin]`;
      horaFinInput.required = true;
      newHorarioEntry.appendChild(horaFinInput);
      newHorarioEntry.appendChild(document.createElement('br'));

      horarioContainer.appendChild(newHorarioEntry);
    });
